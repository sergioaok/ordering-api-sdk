<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <%= htmlWebpackPlugin.tags.bodyTags %>
  <script>
    const ordering = new Ordering.Ordering({
      url: 'http://localhost:8080',
      version: 'v400',
      project: 'development',
      language: 'en',
      // accessToken: 'ACCESS_TOKEN',
      // apiKey: 'API_KEY'
    })

    const init = async (ordering) => {
      // let { content } = await ordering.users().save({ name: 'test', email: 'test@ordering.co', password: '1234567890' })
      // console.log(content)

      const { content } = await ordering.users().auth({ email: 'superadmin@ordering.co', password: 'super' })
      !content.error && console.log("Login successful!")
      const user = content.result
      // console.log(user)

      /**
       * You can use:
       * ordering.setAccessToken().otherApi()
       * or 
       * ordering.setAccessToken();
       * ordering.otherApi()
       */

      ordering.setAccessToken(user.getAccessToken())

      // Users

      // user.name = 'Super';
      // const saveUserResponse = await user.save()
      // console.log('Save name to Super', saveUserResponse)

      // user.name = 'Admin';
      // const saveUser2Response = await user.save()
      // console.log('Save name to Admin', saveUser2Response)

      // const findOneUserResponse = await ordering.users(user.id).select(['name', 'lastname', 'email', 'addresses']).get()
      // console.log('Get user by id', findOneUserResponse.content)

      // if (user.isAdministrator()) {
      //   const conditions = [
      //     {
      //       attribute: 'level',
      //       value: 4
      //     },
      //     {
      //       attribute: 'available',
      //       value: {
      //         condition: '=',
      //         value: false
      //       }
      //     }
      //   ]
      //   const cancelToken = {}
      //   const findAllUserResponse = await ordering.users().select(['name', 'lastname', 'email', 'addresses', 'available']).where(conditions).asDashboard().get({ cancelToken })
      //   console.log('Get users', findAllUserResponse.content)
  
      //   const updateUserResponse = await ordering.users(user.id).save({ phone: Date.now() })
      //   console.log('Update user', updateUserResponse.content)
      // }

      // Addresses
      // const getAddressesResponse = await ordering.users(user.id).addresses().get()
      // console.log(`Addresses of users ${user.id}:`, getAddressesResponse.content)

      // const findOneAddressResponse = await ordering.users(user.id).addresses(getAddressesResponse.content.result[0].id).get()
      // console.log(`Address by id ${getAddressesResponse.content.result[0].id}:`, findOneAddressResponse.content)

      // const address = findOneAddressResponse.content.result

      // address.address_notes = 'Edit address notes 1'
      // const saveUserResponse = await address.save()
      // console.log('Save new address_notes 1', saveUserResponse)

      // address.address_notes = 'Edit address notes 2'
      // const saveUser2Response = await address.save()
      // console.log('Save new address_notes 2', saveUser2Response)

      // const updateAddressResponse = await ordering.users(user.id).addresses(address.id).save({ address_notes: 'Edit address notes 3' })
      // console.log('Update address', updateAddressResponse.content)

      // const addressConditions = [
      //   {
      //     attribute: 'default',
      //     value: false
      //   }
      // ]
      
      // const getFilterAddressesResponse = await ordering.users(user.id).addresses().where(addressConditions).get()
      // console.log(`Addresses filter of users ${user.id}:`, getFilterAddressesResponse.content)
      
      // Orders
      // const getOrdersResponse = await ordering.orders().get()
      // console.log('My orders: ', getOrdersResponse.content)

      // const findOneOrderResponse = await ordering.orders(getOrdersResponse.content.result[0].id).get()
      // console.log('Order by id:', findOneOrderResponse.content)
      // const order = findOneOrderResponse.content.result

      // order.comment = 'Edit comment 1'
      // const saveOrderResponse = await order.save()
      // console.log('Save new comment 1', saveOrderResponse)

      // order.comment = 'Edit comment 2'
      // const saveOrder2Response = await order.save()
      // console.log('Save new comment 2', saveOrder2Response)

      // const updateOrderResponse = await ordering.orders(order.id).save({ comment: 'Edit comment 3' })
      // console.log('Update order', updateOrderResponse.content)

      // const getOrdersDashboardResponse = await ordering.orders().asDashboard().get()
      // console.log('All orders: ', getOrdersDashboardResponse.content)

      // const orderConditions = [
      //   {
      //     attribute: 'status',
      //     value: 11
      //   }
      // ]

      // const getOrdersFilterDashboardResponse = await ordering.orders().where(orderConditions).get()
      // console.log('All Filter orders: ', getOrdersFilterDashboardResponse.content)

      // Configs
      // const getConfigsResponse = await ordering.configs().get()
      // console.log('Configs: ', getConfigsResponse.content)

      // const fingdOneConfigResponse = await ordering.configs(getConfigsResponse.content.result[0].id).get()
      // console.log('Config by id: ', fingdOneConfigResponse.content)

      // const getConfigsDictionaryResponse = await ordering.configs().asDictionary().get()
      // console.log('Configs as dictionary: ', getConfigsDictionaryResponse.content)

      // const createConfigResponse = await ordering.configs().save({
      //   key: 'testsdk',
      //   value: 'testsdkvalue'
      // })
      // console.log('Config created:', createConfigResponse.content)
      
      // const config = createConfigResponse.content.result

      // config.value = 'testsdkvalueedit1'
      // const saveConfigResponse = await config.save()
      // console.log('Save new value', saveConfigResponse)

      // const updateConfigResponse = await ordering.configs(config.id).save({ value: 'testsdkvalueedit2' })
      // console.log('Update config', updateConfigResponse.content)

      // const deleteConfigsResponse = await ordering.configs(config.id).delete()
      // console.log(`Config ${config.id} removed: `, deleteConfigsResponse.content)

      // Businesses
      // const getBusinessesDashboard = await ordering.businesses().asDashboard().get()
      // console.log('Business Dashboard: ', getBusinessesDashboard.content)

      // const getBusinessesCustomerResponse = await ordering.businesses().select(['name', 'slug', 'logo', 'header', 'location', 'description', 'food', 'alcohol', 'groceries', 'laundry', 'zones', 'delivery_price', 'minimum', 'schedule', 'featured', 'reviews', 'about', 'delivery_time', 'pickup_time', 'offers']).parameters({
      //   type: 1,
      //   location: '40.7539143,-73.9810162'
      // }).get()
      // console.log('Business Customer: ', getBusinessesCustomerResponse.content)

      // const findOneBusinessesCustomerResponse = await ordering.businesses(41).select(['name', 'slug', 'logo', 'header', 'location', 'description', 'food', 'alcohol', 'groceries', 'laundry', 'zones', 'delivery_price', 'minimum', 'schedule', 'featured', 'reviews', 'about', 'delivery_time', 'pickup_time', 'offers']).parameters({
      //   type: 1,
      //   location: '40.7539143,-73.9810162'
      // }).get()
      // console.log('Business Customer: ', findOneBusinessesCustomerResponse.content)

      // const findOneSlugDashboard = await ordering.businesses(getBusinessesDashboard.content.result[0].slug).get()
      // console.log('Business by slug: ', findOneSlugDashboard.content)

      // const findOneIdDashboard = await ordering.businesses(getBusinessesDashboard.content.result[0].id).get()
      // console.log('Business by id: ', findOneIdDashboard.content)

      // const business = findOneIdDashboard.content.result

      // business.about = 'SDK Edit'
      // const saveBusinessReponse = await business.save()
      // console.log('Save new about', saveBusinessReponse)

      // const updateBusinessResponse = await ordering.businesses(business.id).save({ about: 'SDK Edit 2' })
      // console.log('Update business', updateBusinessResponse.content)

      // const validateCartResponse = await ordering.businesses(business.id).validateCart({ type: 1, products: [1,2,3] })
      // console.log('Validate cart business', validateCartResponse.content)

      // Validation fields
      // const getValidationFieldsResponse = await ordering.validationFields().get()
      // console.log('Validation fields: ', getValidationFieldsResponse.content)

      // const getValidationFieldsAddressResponse = await ordering.validationFields().toAddress().asDictionary().get()
      // console.log('Validation fields address: ', getValidationFieldsAddressResponse.content)

      // const findOneValidationFieldsResponse = await ordering.validationFields(getValidationFieldsResponse.content.result[0].id).get()
      // console.log('Validation field by id: ', findOneValidationFieldsResponse.content)

      // const field = findOneValidationFieldsResponse.content.result
      // console.log(field.name)

      // field.name = 'Name sdk'
      // const saveValidationFieldResponse = await field.save()
      // console.log('Save new name', saveValidationFieldResponse)

      // const updateValidationFieldsResponse = await ordering.validationFields(field.id).save({ name: 'Name' })
      // console.log('Update field: ', updateValidationFieldsResponse.content)

      // Languages
      // const getLanguagesResponse = await ordering.languages().get()
      // console.log('Languages: ', getLanguagesResponse.content)

      // const languageOfList = getLanguagesResponse.content.result[0]

      // languageOfList.name = 'English SDK 1'
      // const saveLanguageOfListResponse = await languageOfList.save()
      // console.log('Save new name', saveLanguageOfListResponse)


      // const findOneLanguageResponse = await ordering.languages(getLanguagesResponse.content.result[0].id).get()
      // console.log('Language by id: ', findOneLanguageResponse.content)

      // const language = findOneLanguageResponse.content.result

      // language.name = 'English SDK'
      // const saveLanguageResponse = await language.save()
      // console.log('Save new name', saveLanguageResponse)

      // const updateLanguageResponse = await ordering.languages(language.id).save({ name: 'English' })
      // console.log('Update language: ', updateLanguageResponse.content)

      // Translations
      // const getTranslationsResponse = await ordering.translations().get()
      // console.log('Translations: ', getTranslationsResponse.content)

      // const getDictionaryTranslationsResponse = await ordering.translations().asDictionary().get()
      // console.log('Translations Dictionary: ', getDictionaryTranslationsResponse.content)

      // const findOneTranslateResponse = await ordering.translations(getTranslationsResponse.content.result[0].id).get()
      // console.log('Translate by id: ', findOneTranslateResponse.content)

      // const translate = findOneTranslateResponse.content.result

      // translate.text = 'e-mail SDK'
      // const saveTranslateResponse = await translate.save()
      // console.log('Save new text', saveTranslateResponse)

      // const updateTranslateResponse = await ordering.translations(translate.id).save({ text: 'e-mail' })
      // console.log('Update translate: ', updateTranslateResponse.content)

      // Categories
      // const getBusinessesDashboard = await ordering.businesses().asDashboard().get()
      // const businessId = getBusinessesDashboard.content.result[0].id

      // const getCategoryResponse = await ordering.businesses(businessId).categories().get()
      // console.log('Categories: ', getCategoryResponse.content)
      // const categoryId = getCategoryResponse.content.result[0].id

      // const findOneCategoryResponse = await ordering.businesses(businessId).categories(categoryId).get()
      // console.log('Category: ', findOneCategoryResponse.content)

      // const category = findOneCategoryResponse.content.result
      // const backUpName = category.name + ''
      // category.name = `${category.name} SDK`
      // const saveCategoryResponse = await category.save()
      // console.log('Save new name', saveCategoryResponse)

      // const updateCategoryResponse = await ordering.businesses(businessId).categories(categoryId).save({ name: backUpName })
      // console.log('Update category: ', updateCategoryResponse.content)

      // Products
      // const getBusinessesDashboard = await ordering.businesses().asDashboard().get()
      // const businessId = getBusinessesDashboard.content.result[0].id

      // const getCategoryResponse = await ordering.businesses(businessId).categories().get()
      // const categoryId = getCategoryResponse.content.result[0].id

      // const getProductsResponse = await ordering.businesses(businessId).categories(categoryId).products().get()
      // console.log('Products: ', getProductsResponse.content)
      // const productId = getProductsResponse.content.result[0].id

      // const findOneProductResponse = await ordering.businesses(businessId).categories(categoryId).products(productId).get()
      // console.log('Product: ', findOneProductResponse.content)

      // const product = findOneProductResponse.content.result
      // const backUpName = product.name + ''
      // product.name = `${product.name} SDK`
      // const saveProductResponse = await product.save()
      // console.log('Save new name', saveProductResponse)

      // const updateProductResponse = await ordering.businesses(businessId).categories(categoryId).products(productId).save({ name: backUpName })
      // console.log('Update product: ', updateProductResponse.content)

      // Pages
      // const getPagesResponse = await ordering.pages().get()
      // console.log('Pages: ', getPagesResponse.content)
      
      // const pageId = getPagesResponse.content.result[0].id

      // const findOnePageResponse = await ordering.pages(pageId).get()
      // console.log('Page: ', findOnePageResponse.content)

      // const page = findOnePageResponse.content.result
      // const backUpName = page.name + ''
      // page.name = `${backUpName} SDK`
      // const savePageResponse = await page.save()
      // console.log('Save new name', savePageResponse)

      // const updatePageResponse = await ordering.pages(pageId).save({ name: backUpName })
      // console.log('Update page: ', updatePageResponse.content)

      // Menus
      // const getBusinessesDashboard = await ordering.businesses().asDashboard().get()
      // const businessId = getBusinessesDashboard.content.result[0].id

      // const getMenusResponse = await ordering.businesses(businessId).menus().get()
      // console.log('Menus: ', getMenusResponse.content)

      // const menuId = getMenusResponse.content.result[0].id

      // const findOneMenuResponse = await ordering.businesses(businessId).menus(menuId).get()
      // console.log('Menu: ', findOneMenuResponse.content)

      // const menu = findOneMenuResponse.content.result
      // const backUpName = menu.name + ''
      // menu.name = `${backUpName} SDK`
      // const saveMenuResponse = await menu.save()
      // console.log('Save new name', saveMenuResponse)

      // const updateMenuResponse = await ordering.businesses(businessId).menus(menuId).save({ name: backUpName })
      // console.log('Update menu: ', updateMenuResponse.content)

      // Business products
      // const getBusinessesDashboard = await ordering.businesses().asDashboard().get()
      // const businessId = getBusinessesDashboard.content.result[0].id

      // const getBusinessProductsResponse = await ordering.businesses(19).products().parameters({ type: 1 }).get()
      // console.log('Business products: ', getBusinessProductsResponse.content)

      // User alerts
      // const getUserAlertsResponse = await ordering.users(user.id).alerts().get()
      // console.log('Alerts: ', getUserAlertsResponse.content)

      // Countries
      // const getCuntriesResponse = await ordering.countries().get()
      // console.log('Countries: ', getCuntriesResponse.content)
      // const countryId = getCuntriesResponse.content.result[0].id

      // const findOneCountryResponse = await ordering.countries(countryId).get()
      // console.log('Country: ', findOneCountryResponse.content)

      // const country = findOneCountryResponse.content.result
      // const backUpName = country.name + ''
      // country.name = `${backUpName} SDK`
      // const saveCountryResponse = await country.save()
      // console.log('Save new name', saveCountryResponse)

      // const updateCountryResponse = await ordering.countries(countryId).save({ name: backUpName })
      // console.log('Update country: ', updateCountryResponse.content)

      // Cities
      // const getCuntriesResponse = await ordering.countries().get()
      // const countryId = getCuntriesResponse.content.result[0].id

      // const getCitiesResponse = await ordering.countries(countryId).cities().get()
      // console.log('Cities: ', getCitiesResponse.content)
      // const cityId = getCuntriesResponse.content.result[0].id

      // const findOneCityResponse = await ordering.countries(countryId).cities(cityId).get()
      // console.log('City: ', findOneCityResponse.content)

      // const city = findOneCityResponse.content.result
      // const backUpName = city.name + ''
      // city.name = `${backUpName} SDK`
      // const saveCityResponse = await city.save()
      // console.log('Save new name', saveCityResponse)

      // const updateCityResponse = await ordering.countries(countryId).cities(cityId).save({ name: backUpName })
      // console.log('Update city: ', updateCityResponse.content)

      // Order Summary
      // const summaryResponse = await ordering.orders().where([{attribute: 'status', 'value': 0}]).summary()
      // console.log(summaryResponse.content)

      // Order messages
      // const getOrdersResponse = await ordering.orders().get()
      // const orderId = getOrdersResponse.content.result[0].id

      // const getOrderMessagesResponse = await ordering.orders(orderId).messages().get()
      // console.log('Messages: ', getOrderMessagesResponse.content)

      // Order options
      // const getOrderOptionsResponse = await ordering.orderOptions().get()
      // console.log('Order options', getOrderOptionsResponse.content)

      // Carts
      // const getCartsResponse = await ordering.carts().get()
      // console.log('Carts: ', getCartsResponse.content)
      // const cartUuid = getCartsResponse.content.result[0].uuid

      // const getCartResponse = await ordering.carts(cartUuid).get()
      // console.log('Cart: ', getCartResponse.content)

      // const updateCartRequest = await ordering.carts(cartUuid).addProduct({})
      // console.log('Update cart: ', updateCartRequest.content)

      // Logout
      const logoutResponse = await ordering.users(user.id).logout()
      !logoutResponse.content.error && console.log("Logout successful!")
    }

    init(ordering)
  </script>
</body>
</html>